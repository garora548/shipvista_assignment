(this.webpackJsonpwaterplants=this.webpackJsonpwaterplants||[]).push([[0],{42:function(t,e,n){},43:function(t,e,n){},66:function(t,e,n){},70:function(t,e,n){"use strict";n.r(e);var a=n(0),c=n.n(a),l=n(15),r=n.n(l),o=(n(42),n(43),n(10)),i=n(35),s=n(25),d=n(9),u=n(12),j=n.n(u),b="http://localhost:49423/api",h=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b+"/plant/";return{fetchAll:function(){return j.a.get(t)},fetchById:function(e){return j.a.get(t+e)},create:function(e){return j.a.post(t,e)},update:function(e,n){return j.a.put(t+e,n)},delete:function(e){return j.a.delete(t+e)}}},f="CREATE",O="UPDATE",p="DELETE",x="FETCH_ALL",g={list:[]},m=Object(o.c)({plantReducer:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,e=arguments.length>1?arguments[1]:void 0;switch(e.type){case x:return Object(d.a)(Object(d.a)({},t),{},{list:Object(s.a)(e.payload)});case f:return Object(d.a)(Object(d.a)({},t),{},{list:[].concat(Object(s.a)(t.list),[e.p])});case O:return Object(d.a)(Object(d.a)({},t),{},{list:t.list.map((function(t){return t.id==e.payload.id?e.payload:t}))});case p:return Object(d.a)(Object(d.a)({},t),{},{list:t.list.filter((function(t){return t.id!=e.payload.id}))});default:return t}}}),W=Object(o.e)(m,Object(o.d)(Object(o.a)(i.a))),v=n(18),y=n(19),w="Watering",P=(n(66),n(1)),S={fetchAllPlants:function(){return function(t){h().fetchAll().then((function(e){t({type:x,payload:e.data})})).catch((function(t){return console.log(t)}))}},createPlant:function(t,e){return function(n){h().create(t).then((function(t){n({type:f,payload:t.data}),e()})).catch((function(t){return console.log(t)}))}},updatePlant:function(t,e,n){return function(a){h().update(t,e).then((function(c){a({type:O,payload:Object(d.a)({id:t},e)}),n()})).catch((function(t){return console.log(t)}))}}},k=Object(v.b)((function(t){return{plantList:t.plantReducer.list}}),S)((function(t){var e=Object(a.useState)(""),n=Object(y.a)(e,2),c=n[0],l=n[1],r=Object(a.useState)(0),o=Object(y.a)(r,2),i=o[0],s=o[1],d=Object(a.useState)(6),u=Object(y.a)(d,2),j=u[0],b=(u[1],null);Object(a.useEffect)((function(){t.fetchAllPlants()}),[]);var h=function(e){if((new Date-new Date(e.lastWatered))/1e3>30){var n={name:e.name,status:w,lastWatered:e.lastWatered};t.updatePlant(e.id,n,(function(){return console.log("Started Watering")})),b=e;var a=setTimeout(f,1e4);s(a)}else alert("You cannot water the plant within 30 seconds")},f=function(){var e={name:b.name,status:"Watered",lastWatered:new Date};t.updatePlant(b.id,e,(function(){return console.log("Done Watering")}))},O=function(e){if(e.status==w){clearTimeout(i);var n={name:e.name,status:"Stopped",lastWatered:e.lastWatered};t.updatePlant(e.id,n,(function(){return console.log("Watering Stopped")})),window.location="#"}else alert("Plant is not in watering state right now")};return Object(P.jsxs)("div",{className:"container",children:[Object(P.jsx)("br",{}),Object(P.jsx)("h3",{children:"Add Plant"}),Object(P.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n={name:c,status:"Not Watered",lastWatered:null};t.createPlant(n,(function(){return alert("Plant added")})),window.location="/"},children:[Object(P.jsxs)("div",{className:"form-group",children:[Object(P.jsx)("label",{children:"Name: "}),Object(P.jsx)("input",{type:"text",required:!0,className:"form-control",value:c,onChange:function(t){return l(t.target.value)}})]}),Object(P.jsx)("div",{className:"form-group",children:Object(P.jsx)("input",{type:"submit",value:"Add Plant",className:"btn btn-dark"})})]}),Object(P.jsx)("h3",{children:"Plants"}),Object(P.jsxs)("table",{className:"table",children:[Object(P.jsx)("thead",{className:"thead-light",children:Object(P.jsxs)("tr",{children:[Object(P.jsx)("th",{children:"Name"}),Object(P.jsx)("th",{children:"Last Watered"}),Object(P.jsx)("th",{children:"Hours of Last Watered"}),Object(P.jsx)("th",{children:"Status"}),Object(P.jsx)("th",{children:"Actions"})]})}),Object(P.jsx)("tbody",{children:t.plantList.map((function(t,e){var n=new Date,a=new Date(t.lastWatered),c=null!=t.lastWatered?Math.abs(n-a)/36e5:null;return c>j?Object(P.jsxs)("tr",{style:{backgroundColor:"#ff1a1a",color:"black"},children:[Object(P.jsx)("td",{children:t.name}),Object(P.jsx)("td",{children:null==t.lastWatered?null:new Date(t.lastWatered).toLocaleString()}),Object(P.jsx)("td",{children:null!=c?c.toFixed(2):null}),Object(P.jsx)("td",{children:t.status}),Object(P.jsxs)("td",{children:[Object(P.jsx)("a",{href:"#",onClick:function(){h(t)},style:{color:"black",fontWeight:"bold"},children:"Start"})," |",Object(P.jsx)("a",{href:"#",onClick:function(){O(t)},style:{color:"black",fontWeight:"bold"},children:"Stop"})]})]},e):Object(P.jsxs)("tr",{style:{backgroundColor:"#DAD7D7",color:"black"},children:[Object(P.jsx)("td",{children:t.name}),Object(P.jsx)("td",{children:null==t.lastWatered?null:new Date(t.lastWatered).toLocaleString()}),Object(P.jsx)("td",{children:null!=c?c.toFixed(2):null}),Object(P.jsx)("td",{children:t.status}),Object(P.jsxs)("td",{children:[Object(P.jsx)("a",{href:"#",onClick:function(){h(t)},style:{color:"black",fontWeight:"bold"},children:"Start"})," |",Object(P.jsx)("a",{href:"#",onClick:function(){O(t)},style:{color:"black",fontWeight:"bold"},children:"Stop"})]})]},e)}))})]})]})})),D=(n(68),n(37)),C=n(3);var A=function(){return Object(P.jsx)(v.a,{store:W,children:Object(P.jsx)(D.a,{children:Object(P.jsx)("div",{className:"container",children:Object(P.jsx)(C.a,{path:"/",exact:!0,component:k})})})})},L=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,71)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,l=e.getLCP,r=e.getTTFB;n(t),a(t),c(t),l(t),r(t)}))};r.a.render(Object(P.jsx)(c.a.StrictMode,{children:Object(P.jsx)(A,{})}),document.getElementById("root")),L()}},[[70,1,2]]]);
//# sourceMappingURL=main.1819b079.chunk.js.map